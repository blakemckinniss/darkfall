rules:
  # ============================================================================
  # ARCHITECTURE RULES - Working Patterns
  # ============================================================================

  # ARCHITECTURE: No backend frameworks (JavaScript/TypeScript)
  - id: no-backend-frameworks-express
    languages: [generic]
    pattern-regex: '(import\s+.*\s+from\s+[''"]express[''"]|require\([''"]express[''"])'
    paths:
      include:
        - "*.ts"
        - "*.tsx"
        - "*.js"
        - "*.jsx"
    message: |
      Backend framework detected (express).

      üìñ **ADR-001: Client-Side Only Architecture**
      ‚ùå **Rejected**: Backend frameworks
      ‚úÖ **Allowed**: External API calls, localStorage

      See: docs/ADR.md#adr-001

    severity: ERROR
    metadata:
      category: architecture
      adr_reference: "ADR-001"

  - id: no-backend-frameworks-koa
    languages: [generic]
    pattern-regex: '(import\s+.*\s+from\s+[''"]koa[''"]|require\([''"]koa[''"])'
    paths:
      include:
        - "*.ts"
        - "*.tsx"
        - "*.js"
        - "*.jsx"
    message: |
      Backend framework detected (koa).

      üìñ **ADR-001: Client-Side Only Architecture**
      ‚ùå **Rejected**: Backend frameworks
      ‚úÖ **Allowed**: External API calls, localStorage

      See: docs/ADR.md#adr-001

    severity: ERROR
    metadata:
      category: architecture
      adr_reference: "ADR-001"

  - id: no-backend-frameworks-fastify
    languages: [generic]
    pattern-regex: '(import\s+.*\s+from\s+[''"]fastify[''"]|require\([''"]fastify[''"])'
    paths:
      include:
        - "*.ts"
        - "*.tsx"
        - "*.js"
        - "*.jsx"
    message: |
      Backend framework detected (fastify).

      üìñ **ADR-001: Client-Side Only Architecture**
      ‚ùå **Rejected**: Backend frameworks
      ‚úÖ **Allowed**: External API calls, localStorage

      See: docs/ADR.md#adr-001

    severity: ERROR
    metadata:
      category: architecture
      adr_reference: "ADR-001"

  # ARCHITECTURE: No database libraries
  - id: no-database-mysql
    languages: [generic]
    pattern-regex: '(import\s+.*\s+from\s+[''"]mysql2?[''"]|require\([''"]mysql2?[''"])'
    paths:
      include:
        - "*.ts"
        - "*.tsx"
        - "*.js"
        - "*.jsx"
    message: |
      Database library detected (mysql).

      üìñ **ADR-001: Client-Side Only Architecture**
      ‚ùå **Rejected**: Direct database access
      ‚úÖ **Allowed**: localStorage, external APIs

      See: docs/ADR.md#adr-001

    severity: ERROR
    metadata:
      category: architecture
      adr_reference: "ADR-001"

  - id: no-database-pg
    languages: [generic]
    pattern-regex: '(import\s+.*\s+from\s+[''"]pg[''"]|require\([''"]pg[''"])'
    paths:
      include:
        - "*.ts"
        - "*.tsx"
        - "*.js"
        - "*.jsx"
    message: |
      Database library detected (PostgreSQL).

      üìñ **ADR-001: Client-Side Only Architecture**
      ‚ùå **Rejected**: Direct database access
      ‚úÖ **Allowed**: localStorage, external APIs

      See: docs/ADR.md#adr-001

    severity: ERROR
    metadata:
      category: architecture
      adr_reference: "ADR-001"

  - id: no-database-mongodb
    languages: [generic]
    pattern-regex: '(import\s+.*\s+from\s+[''"]mongodb[''"]|require\([''"]mongodb[''"])'
    paths:
      include:
        - "*.ts"
        - "*.tsx"
        - "*.js"
        - "*.jsx"
    message: |
      Database library detected (MongoDB).

      üìñ **ADR-001: Client-Side Only Architecture**
      ‚ùå **Rejected**: Direct database access
      ‚úÖ **Allowed**: localStorage, external APIs

      See: docs/ADR.md#adr-001

    severity: ERROR
    metadata:
      category: architecture
      adr_reference: "ADR-001"

  - id: no-database-mongoose
    languages: [generic]
    pattern-regex: '(import\s+.*\s+from\s+[''"]mongoose[''"]|require\([''"]mongoose[''"])'
    paths:
      include:
        - "*.ts"
        - "*.tsx"
        - "*.js"
        - "*.jsx"
    message: |
      Database library detected (Mongoose ORM).

      üìñ **ADR-001: Client-Side Only Architecture**
      ‚ùå **Rejected**: Direct database access
      ‚úÖ **Allowed**: localStorage, external APIs

      See: docs/ADR.md#adr-001

    severity: ERROR
    metadata:
      category: architecture
      adr_reference: "ADR-001"

  - id: no-database-sqlite3
    languages: [generic]
    pattern-regex: '(import\s+.*\s+from\s+[''"]sqlite3?[''"]|require\([''"]sqlite3?[''"])'
    paths:
      include:
        - "*.ts"
        - "*.tsx"
        - "*.js"
        - "*.jsx"
    message: |
      Database library detected (SQLite3).

      üìñ **ADR-001: Client-Side Only Architecture**
      ‚ùå **Rejected**: Direct database access
      ‚úÖ **Allowed**: localStorage, external APIs

      See: docs/ADR.md#adr-001

    severity: ERROR
    metadata:
      category: architecture
      adr_reference: "ADR-001"
